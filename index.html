<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prelim WS301</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>

    <h1 class="main-h1">
        Enhance Shopping Cart
    </h1>

    <div class="wrapper-container">
        <div class="wrapper">
            <h2 class="cart-h2">ITEMS</h2>
            <div class="input-box">
                <label>Item Name:</label>
                <input type="text" id="item-name" placeholder="Enter item name" required>
                <a href="#"><i class='bx bxs-user'></i></a>
            </div>
    
            <div class="input-box">
                <label>Item Price:</label>
                <input type="number" id="item-price" placeholder="Enter item price" required>
                <a href="#"><i class='bx bxs-purchase-tag'></i></a>
            </div>
    
            <div class="input-box">
                <label>Quantity:</label>
                <input type="number" id="item-quantity" placeholder="Enter quantity" required>
                <a href="#"><i class='bx bxs-cart'></i></a>
            </div>
    
            <button class="addToCartBtn" id="add-to-cart-btn">Add to Cart</button>
        </div>
    
        <div class="wrapper">
            <h2 class="cart-h2">CART ITEMS</h2>
            <div class="list" id="cart-items">
                <!-- Cart items will be displayed here -->
            </div>
            <div class="total-display">
                Total: <span>₱</span> <span id="total-price">0.00</span>
            </div>
            <button class="checkout-btn">Checkout</button>
        </div>
    </div>

    <div id="custom-alert" class="custom-alert">
        <div class="custom-alert-content">
            <span id="alert-message"></span>
            <button id="close-alert-btn">Close</button>
        </div>
    </div>
    
    

    <script>
        const addToCartBtn = document.getElementById('add-to-cart-btn');
        const cartItemsContainer = document.getElementById('cart-items');
        const totalPriceDisplay = document.getElementById('total-price');
        const checkoutBtn = document.querySelector('.checkout-btn');

        let totalPrice = 0;

        function updateTotalPrice() {
            let checkedTotal = 0;
            document.querySelectorAll('.cart-item input[type="checkbox"]').forEach((checkbox) => {
                if (checkbox.checked) {
                    const label = checkbox.nextElementSibling.textContent;
                    const [itemName, rest] = label.split(' - ');
                    const [itemPrice, itemQuantity] = rest.split(' x ');
                    checkedTotal += parseFloat(itemPrice.replace('₱', '')) * parseInt(itemQuantity);
                }
            });
            totalPriceDisplay.textContent = checkedTotal.toFixed(2);
        }

            addToCartBtn.addEventListener('click', () => {
            const itemName = document.getElementById('item-name').value;
            const itemPrice = parseFloat(document.getElementById('item-price').value);
            const itemQuantity = parseInt(document.getElementById('item-quantity').value);

            if (itemName && itemPrice && itemQuantity) {
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');
                cartItem.innerHTML = `
                    <div>
                        <input type="checkbox">
                        <label>${itemName} - ₱${itemPrice.toFixed(2)} x ${itemQuantity}</label>
                    </div>
                    <div>
                        <button class="edit-btn">Edit</button>
                        <button class="delete-btn">Delete</button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);

                cartItem.querySelector('input[type="checkbox"]').addEventListener('change', updateTotalPrice);

                document.getElementById('item-name').value = '';
                document.getElementById('item-price').value = '';
                document.getElementById('item-quantity').value = '';
            } else {
                alert('Please fill out all fields');
            }
        });

        cartItemsContainer.addEventListener('click', (event) => {
            if (event.target.classList.contains('delete-btn')) {
                const cartItem = event.target.parentElement.parentElement;
                cartItem.remove();
                updateTotalPrice();
            } else if (event.target.classList.contains('edit-btn')) {
                const cartItem = event.target.parentElement.parentElement;
                const label = cartItem.querySelector('label').textContent;
                const [itemName, rest] = label.split(' - ');
                const [itemPrice, itemQuantity] = rest.split(' x ');

                document.getElementById('item-name').value = itemName;
                document.getElementById('item-price').value = itemPrice.replace('₱', '');
                document.getElementById('item-quantity').value = itemQuantity;

                cartItem.remove();
                updateTotalPrice();
            }
        });

    checkoutBtn.addEventListener('click', () => {
    const checkedItems = [];
    
   
    document.querySelectorAll('.cart-item input[type="checkbox"]').forEach((checkbox) => {
        if (checkbox.checked) {
            const label = checkbox.nextElementSibling.textContent;
            const [itemName, rest] = label.split(' - '); 
            const [itemPrice, itemQuantity] = rest.split(' x ');
            
            checkedItems.push(`${itemName} (₱${itemPrice.replace('₱', '')} x ${itemQuantity})`);
        }
    });

    if (checkedItems.length > 0) {
        showCustomAlert('The following items are checked out:', checkedItems);
    } else {
        showCustomAlert('No items selected for checkout.', []);
    }
});


function showCustomAlert(message, items) {
    const alertBox = document.getElementById('custom-alert');
    const alertMessage = document.getElementById('alert-message');
    const closeAlertBtn = document.getElementById('close-alert-btn');

    let formattedMessage = `<span style="color: #fff;">The following items are checked out:</span><br><br>`;
    formattedMessage += items.map(item => `<span style="color: #39ff14;">${item}</span>`).join('<br><br>'); 

    
    alertMessage.innerHTML = formattedMessage;
    
    
    alertBox.style.display = 'flex';

    closeAlertBtn.addEventListener('click', () => {
        alertBox.style.display = 'none';
    });
}


    
    </script>
</body>
</html>